version: '3.9'

services:
  ui:
    container_name: 'myapp'
    image: 'myapp'
    build:
      context: .
      dockerfile: Dockerfilenginx
    ports:
      - "80:80"
    depends_on:
      - "keycloak"
  keycloak:
    container_name: keycloak
    image: keycloak
    build:
      context: .
      dockerfile: Dockerfilekeycloak
    environment:
        KEYCLOAK_ADMIN: admin
        KEYCLOAK_ADMIN_PASSWORD: admin
        KK_TO_TCM_URL: endpoint
        KK_TO_TCM_PORT: 8042
        KK_TO_TCM_ENDPOINT: /kcUpdate
        KK_TO_TCM_USERNAME: user
        KK_TO_TCM_PASSWORD: password
    volumes:
      - .\keycloack_config:/config
    ports:
      - "8080:8080"
    command: start-dev

  endpoint:
    container_name: endpoint
    image: 'endpoint'
    build:
      context: .
      dockerfile: DockerfileEndpoint
    ports:
      - "8042:8042"


